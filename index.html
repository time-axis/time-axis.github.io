<!DOCTYPE html>
<html>
<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<style>
		body {
			background-color: #8393b0;
			color: #FFFFFF;
			font-family: "Arial", Helvetica, sans-serif;
		}
		
		a {
			text-decoration: none;
			color: #DDDDFF;
			font-weight: bold;
			text-shadow: 2px 2px #000000;
		}
		
		a:hover {
			text-decoration: none;
			color: #FFFFFF;
			font-weight: bold;
		}
		
		h1 {
			clear: both;
			text-align: center;
		}
		
		input[type=text] {
		  width: 380px;
		  padding: 12px 20px;
		  margin: 8px 0;
		  box-sizing: border-box;
		  border: 2px solid #FFFFFF;
		  border-radius: 2px;
		  background-color: #536390;
		  color: #FFFFFF;
		}
		
		#cardListDiv {
			margin-top: 100px;
			margin-left: 100px;
			margin-right: 100px;
			margin-bottom: 200px;
			height:auto;
			text-align: center;
		}
		
		#afterSummon {
			margin-top: 50px;
			margin-left: 8vw;
			margin-right: 8vw;
			margin-bottom: 200px;
			height:auto;
			text-align: center;
		}
		
		#beforeSummon {
			width: 90%;
			margin: auto;
			text-align: center;
			padding: 200px 0;
		}
		
		#summoningPlatform {
			height: 50vw;
		}
		
		#downloadLink {
			display:block;
			text-decoration: none;
			color: #FFFFFF;
			width: 125px;
			margin: auto;
			text-shadow: none;
		}
		
		#duringSummon {
			width: 90%;
			margin: auto;
			text-align: center;
		}
		
		#volumeMute {
			-webkit-user-select: none; /* Safari */        
			-moz-user-select: none; /* Firefox */
			-ms-user-select: none; /* IE10+/Edge */
			user-select: none; /* Standard */
			padding: 0 10px;
		}
		
		.mutedButton {
			opacity: 0.7;
		}
		
		.button {
			height: 35px;
			width: 180px;
			margin-left: 20px;
			margin-right: 20px;
			padding: 20px 0;
			text-align: center;
			background-color: #7383a0;
			display: inline-block;
			border: 3px;
			border-style: solid;
			border-radius: 3px;
			border-color: #536390;
			font-size: 30px;
			font-weight: bold;
		}
		
		#connectedPlayersBox {
			background-color: #536390;
			border: 2px;
			border-radius: 2px;
			border-style: solid;
			border-color: #334370;
			width: 480px;
			text-align: left;
			padding: 10px 10px;
			display: inline-block;
		}
		
		.button:hover {
			background-color: #536390;
			border-color: #334370;
			cursor: pointer;
		}
		
		.buttonSmall {
			height: 28px;
			width: 125px;
			margin-left: 10px;
			margin-right: 10px;
			padding: 10px 0;
			text-align: center;
			background-color: #7383a0;
			display: inline-block;
			border: 3px;
			border-style: solid;
			border-radius: 3px;
			border-color: #536390;
			font-size: 20px;
			font-weight: bold;
		}
		
		.buttonSmall:hover {
			background-color: #536390;
			border-color: #334370;
			cursor: pointer;
		}
		
		.slider {
			  -webkit-appearance: none;  /* Override default CSS styles */
			  appearance: none;
			  width: 200px; /* Full-width */
			  height: 25px; /* Specified height */
			  background: #7383a0;
			  outline: none; /* Remove outline */
			  opacity: 0.7; /* Set transparency (for mouse-over effects on hover) */
			  -webkit-transition: .2s; /* 0.2 seconds transition on hover */
			  transition: opacity .2s;
		}
		
		.slider:hover {
			opacity: 1;
		}
		
		/* The slider handle (use -webkit- (Chrome, Opera, Safari, Edge) and -moz- (Firefox) to override default look) */
		.slider::-webkit-slider-thumb {
		  -webkit-appearance: none; /* Override default look */
		  appearance: none;
		  width: 25px; /* Set a specific slider handle width */
		  height: 25px; /* Slider handle height */
		  background: #FFFFFF;
		  cursor: pointer; /* Cursor on hover */
		}

		.slider::-moz-range-thumb {
		  width: 25px; /* Set a specific slider handle width */
		  height: 25px; /* Slider handle height */
		  background: #FFFFFF;
		  cursor: pointer; /* Cursor on hover */
		}
		
		#header {
			padding: 10px 0;
			margin-left: auto;
			margin-right: auto;
			width: 95%;
			text-align: center;
		}
		
		
		video {
			z-index: -1;
			width: 100%;
			object-fit: cover;
			position: absolute;
			background-attachment: scroll;
			top: 0vw;
			left: 0;
			min-height: 555px;
			height: calc(100vh);
			-webkit-animation-name: videofadeIn;
			-webkit-animation-duration: 0.8s;
			-webkit-animation-play-state: paused;
		}
		
		@keyframes videofadeIn {
			0% {
				filter:opacity(0%);
			}
			100% {
				filter:opacity(100%);
			}
		}
		
		#footer {
			clear: both;
			height: 200px;
		}
		
		#summonDiv {
			width: 80%;
			margin: auto;
			text-align: center;
			
		}
		
		#rulesDiv {
			width: 80%;
			margin: auto;
			text-align: center;
		}
		
		li {
			float: left;
			height: auto;
			
		}
		
		.img-thumbnail {
			border-radius: 12px; 
			width: 200px;
			position: absolute;
			float:left;
		}
		
		.img-thumbnail:hover {
			top: -40%;
			left: -25%;
			width: 375px;
			border-radius: 20px;
			position: relative;
			z-index: 999;
		}
		
		#volumeMute:hover {
			cursor:pointer;
		}
		
		.transform:hover {
			cursor:pointer;
		}
		
		.thumbnail {
			width: 200px;
			height: 279px;
			display: flex;
		}
		
		.invisible {
			opacity: 0;
		}
		
		.hidden {
			display: none !important;
		}
		
		.card {
			border-radius: 20px;
			width: 100%;
			height: 523px;
			margin: 0 auto;
		}
		
		.exampleCard {
			border-radius: 20px;
			margin: 0 auto;
		}
		
		#summonCardContainer {
			width: 375px;
			margin: 0 auto;
		}
		
		.fadingIn {
			-webkit-animation-name: fadingInAnim;
			-webkit-animation-duration: 1.4s;
			-webkit-animation-play-state: paused;
			-webkit-animation-timing-function: ease-in;
		}
		
		@keyframes fadingInAnim {
			0% {
				opacity: 0;
			}
			25% {
				opacity: 1;
			}
			100% {
				opacity: 1;
			}
		}
		
		.spinning {
			-webkit-animation-name: spinningAnim;
			-webkit-animation-duration: 0.3s;
			-webkit-animation-play-state: running;
			-webkit-animation-iteration-count: infinite;
		}
		
		@keyframes spinningAnim {
			0%, 100% {
				width: 375px;
				height: 523px;
			}
			50% {
				width: 0px;
				height: 523px;
			}
		}
		
	</style>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://unpkg.com/peerjs@1.0.0/dist/peerjs.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
		
			$.ajax({
				type: "GET",
				url: 'https://time-axis.github.io/FateGrandOrder.xml',
				cache: false,
				dataType: 'xml',
				success: function(data){
				
					$("ul").children().remove();
					
					var cardsList = new Array();
					
					var commonList = new Array();
					var uncommonList = new Array();
					var rareList = new Array();
					var mythicList = new Array();
					var specialList = new Array();
					
					var busy = false;
					
					// Populate Card List
					$(data).find("card").each( function (i) {
						var newCard = new card(i,$(this).find('name').text(),$(this).find('set').attr('rarity'),$(this).find('token').text(),$(this).find('prop').find('layout').text(),$(this).find('prop').find('side').text(),$(this).find('prop').find('type').text());
						cardsList.push(newCard);
						if(!newCard.isBackside()){
							switch(newCard.rarity()){
								case "common":
									commonList.push(newCard);
									break;
								case "uncommon":
									uncommonList.push(newCard);
									break;
								case "rare":
									rareList.push(newCard);
									break;
								case "mythic rare":
									mythicList.push(newCard);
									break;
								case "special":
									specialList.push(newCard);
									break;
								default:
									console.log("Error populating card list.");
									break;
							}
						}
						//console.log(cardsList.length + ", " + i + ", " + cardsList[i].name() + ", " + cardsList[i].rarity() + ", "+ cardsList[i].isToken()+", "+ cardsList[i].isTransform()+", "+cardsList[i].isBackside()+", "+cardsList[i].isEmblem()+", "+cardsList[i].isBasicLand());
					});
					
					// Draw Card List
					
					$("#cardListDiv").append('<h1>Common (55%)</h1><br/><ul>');
					for(var i = 0; i < commonList.length; i++){
						$("#cardListDiv").append("<li class=\"thumbnail\"><span><img src=\"FateGrandOrder-files/"+ encodeURIComponent(commonList[i].name()) + ".jpg\" class=\"img-thumbnail\" /></span></li>");
					}
					$("#cardListDiv").append('</ul><br/><br/><h1>Uncommon (33%)</h1><br/><ul>');
					for(var i = 0; i < uncommonList.length; i++){
						//console.log(uncommonList[i].isTransform());
						if (!uncommonList[i].isTransform()) {
							$("#cardListDiv").append("<li class=\"thumbnail\"><span><img src=\"FateGrandOrder-files/"+ encodeURIComponent(uncommonList[i].name()) + ".jpg\" class=\"img-thumbnail\" /></span></li>");
						} else {
							$("#cardListDiv").append("<li class=\"thumbnail\"><span><img src=\"FateGrandOrder-files/"+ encodeURIComponent(uncommonList[i].name()) + ".jpg\" class=\"transform img-thumbnail\" /></span>"+"<span><img src=\"FateGrandOrder-files/Mister Hyde.jpg\" class=\"hidden img-thumbnail transform\" /></span></li>");
						}
					}
					$("#cardListDiv").append('</ul><br/><br/><h1>Rare (8%)</h1><br/><ul>');
					for(var i = 0; i < rareList.length; i++){
						$("#cardListDiv").append("<li class=\"thumbnail\"><span><img src=\"FateGrandOrder-files/"+ encodeURIComponent(rareList[i].name()) + ".jpg\" class=\"img-thumbnail\" /></span></li>");
					}
					$("#cardListDiv").append('</ul><br/><br/><h1>Mythic Rare (3%)</h1><br/><ul>');
					for(var i = 0; i < mythicList.length; i++){
						$("#cardListDiv").append("<li class=\"thumbnail\"><span><img src=\"FateGrandOrder-files/"+ encodeURIComponent(mythicList[i].name()) + ".jpg\" class=\"img-thumbnail\" /></span></li>");
					}
					$("#cardListDiv").append('</ul><br/><br/><h1>Special (1%)</h1><br/><ul>');
					for(var i = 0; i < specialList.length; i++){
						$("#cardListDiv").append("<li class=\"thumbnail\"><span><img src=\"FateGrandOrder-files/"+ encodeURIComponent(specialList[i].name()) + ".jpg\" class=\"img-thumbnail\" /></span></li>");
					}
					$("#cardListDiv").append('</ul>');
					
					// Rules
					
					
					// Summoning
					var summonList = new Array;
					
					//		Volume Slider
					var lastVolume = 0;
					$("#volumeMute").click(function() {
						if($("#volumeSlider").val() > 0) {
							lastVolume = $("#volumeSlider").val();
							$("#volumeSlider").val(0);
							$("#BGM").prop("volume", 0);
							$("#SFX").prop("volume", 0);
							$("#volumeMute").addClass("mutedButton");
						}
						else {
							$("#volumeSlider").val(lastVolume);
							$("#BGM").prop("volume", lastVolume / 100);
							$("#SFX").prop("volume", lastVolume / 100);
							$("#volumeMute").removeClass("mutedButton");
						}
						
					});
					
					$("#volumeSlider").on("input", function() {
						//console.log($("#volumeSlider").val());
						if($("#volumeSlider").val() > 0) {
							$("#BGM").prop("volume", ($("#volumeSlider").val() / 100));
							$("#SFX").prop("volume", ($("#volumeSlider").val() / 100));
							$("#volumeMute").removeClass("mutedButton");
						}
						else {
							$("#BGM").prop("volume", 0);
							$("#SFX").prop("volume", 0);
						}
						
					});
					
					function normalSummon(){
						var roll = Math.floor((Math.random()*100)+1);
						var summonedCard = "";
						
						
						if (roll < 55) { //Common (55%) 55
							summonedCard = commonList[Math.floor(Math.random() * commonList.length)];
							while(summonedCard.isBasicLand()) // Don't summon basic lands
							{
								summonedCard = commonList[Math.floor(Math.random() * commonList.length)];
							}
						} else 
						if (roll < 88) { //Uncommon (33%) 88
							summonedCard = uncommonList[Math.floor(Math.random() * uncommonList.length)];
						} else
						if (roll < 96) { //Rare (8%) 96
							summonedCard = rareList[Math.floor(Math.random() * rareList.length)];
						} else
						if (roll < 99) { //Mythic Rare (3%) 99
							summonedCard = mythicList[Math.floor(Math.random() * mythicList.length)];
						} 
						else { //Special (1%)
							summonedCard = specialList[Math.floor(Math.random() * specialList.length)];
							while(summonedCard.isToken() || summonedCard.isEmblem()) {
								//console.log("Can't summon "+summonedCard.name()+". Rerolling.");
								summonedCard = specialList[Math.floor(Math.random() * specialList.length)];
							}
						}
						return summonedCard;
					}
					
					function rareSummon(){ // For Guaranteed Rare or Above
						var roll = Math.floor((Math.random()*100)+1);
						var summonedCard = "";
						
						if (roll < 97) { // Rare (97%)
							summonedCard = rareList[Math.floor(Math.random() * rareList.length)];
						}
						else { // Mythic Rare (3%)
							summonedCard = mythicList[Math.floor(Math.random() * mythicList.length)];
						}
						return summonedCard;
					}
					
					$("#begin10SummonButton").click(async function (){ // When Summon 10 Button is Pressed
						
						busy = true;
						window.scrollTo(0, 0);
						$("#header").addClass("invisible");
						$("#beforeSummon").addClass("hidden");
						$("#duringSummon").removeClass("hidden");
						$("#summonVid").get(0).play();
						$("#summonVid").css("-webkit-animation-play-state", "running");
						
						var tempCard = "";
						
						if(!($("#skipAnimationBox").get(0).checked)) {
							//Play BGM
							if($("#volumeSlider").val() > 0) {
								$("#BGM").prop("volume", ($("#volumeSlider").val() / 100));
								$("#SFX").prop("volume", ($("#volumeSlider").val() / 100));
							}
							else {
								$("#BGM").prop("volume", 0);
								$("#SFX").prop("volume", 0);
							}
							$("#BGM").trigger('play');
						}
						
						var rareSlot1 = Math.floor(Math.random()*10);
						var rareSlot2 = Math.floor(Math.random()*10);
						while (rareSlot1 == rareSlot2) {	
							rareSlot2 = Math.floor(Math.random()*10);
						}
						for(var i = 0; i < 10; i++) {
							if(i == rareSlot1 || i== rareSlot2) {
								tempCard = rareSummon();
							}
							else {
								tempCard = normalSummon();
							}
							//console.log(tempCard.name() + " " + tempCard.rarity())
							summonList.push(tempCard);
							//console.log(summonList[i].name());
						}
						//console.log(summonList[0].name());
						
						//STEP 1
						function summonStep1(i) {
							//setTimeout(function() {
								if(summonList[i].rarity() == "common") {
									$("#summonCard").attr('src',"cardback_default" + ".jpg");
								} else
								if(summonList[i].rarity() == "uncommon") {
									$("#summonCard").attr('src',"cardback_uncommon" + ".jpg");
								} else
								if(summonList[i].rarity() == "rare") {
									$("#summonCard").attr('src',"cardback_rare" + ".jpg");
								} else
								if(summonList[i].rarity() == "mythic rare") {
									$("#summonCard").attr('src',"cardback_rare" + ".jpg");
								} 
								else {
									$("#summonCard").attr('src',"cardback_special" + ".jpg");
								}
								$("#summonCardContainer").removeClass("hidden");
								$("#summonCard").css("-webkit-animation-play-state", "running");
								//Play SFX
								if($("#volumeSlider").val() > 0) {
								$("#BGM").prop("volume", ($("#volumeSlider").val() / 100));
								$("#SFX").prop("volume", ($("#volumeSlider").val() / 100));
								}
								else {
									$("#BGM").prop("volume", 0);
									$("#SFX").prop("volume", 0);
								}
								$("#SFX").trigger('load');
								$("#SFX").trigger('play');
							//}, 800);							
						};
						
						//STEP 2
						function summonStep2(i) {
							//setTimeout(function() {
								$("#summonCard").attr('src',"FateGrandOrder-files/"+ summonList[i].name() + ".jpg");
								//$("#summonCardContainer").css("-webkit-animation-duration", "1s");
								$("#summonCardContainer").css("-webkit-animation-iteration-count", "1");
							//}, 3800);
						}
						
						//STEP 3
						function summonStep3(i) {
							//setTimeout(function() {
								$("#summonCardContainer").addClass("hidden");
								$("#summonCardContainer").css("-webkit-animation-iteration-count", "infinite");
							//}, 7500);
						}
						
						//for(var i = 0; i < summonList.length; i++) {
						
						for(i = 0; i < summonList.length; i++) {
							if(!($("#skipAnimationBox").get(0).checked)) {
								await delay(200);
								summonStep1(i);
								await delay(3000);
								summonStep2(i);
								await delay(2050);
								summonStep3(i);
							}
						}
						
						$("#header").removeClass("invisible");
						$("#duringSummon").addClass("hidden");
						$("#afterSummon").removeClass("hidden");
						
						$("#afterSummonList").append('<h1>Summoned Cards:</h1><ul>');
						for(var i = 0; i < summonList.length; i++){
							if(!summonList[i].isTransform()) {							
								$("#afterSummonList").append("<li class=\"thumbnail\"><span><img src=\"FateGrandOrder-files/"+ summonList[i].name() + ".jpg\" class=\"img-thumbnail\" /></span></li>");
							} else {
								$("#afterSummonList").append("<li class=\"thumbnail\"><span><img src=\"FateGrandOrder-files/"+ summonList[i].name() + ".jpg\" class=\"transform img-thumbnail\" /></span>"+"<span><img src=\"FateGrandOrder-files/Mister Hyde.jpg\" class=\"hidden img-thumbnail transform\" /></span></li>");
							}
						}
						$("#afterSummonList").append('</ul><br/><br/>');
						busy = false;
					});
					
					$("#resetButton").click(function() {
						window.scrollTo(0, 0);
						$("#afterSummon").addClass("hidden");
						$("#beforeSummon").removeClass("hidden");
						summonList = new Array;
						$("#BGM").trigger('load');
						$("#SFX").trigger('load');
						$("#summonVid").get(0).load();
						$("#afterSummonList").html("");
					});
								
					/*
					$("#audioTestButton").click(function() {
						console.log($("#volumeSlider").val());
						if($("#volumeSlider").val() > 0) {
							$("#BGM").prop("volume", ($("#volumeSlider").val() / 100));
							$("#SFX").prop("volume", ($("#volumeSlider").val() / 100));
						}
						else {
							$("#BGM").prop("volume", 0);
							$("#SFX").prop("volume", 0);
						}
						$("#BGM").trigger('play');
					});
					$("#audioTestButton2").click(function() {
						console.log($("#volumeSlider").val());
						if($("#volumeSlider").val() > 0) {
							$("#BGM").prop("volume", ($("#volumeSlider").val() / 100));
							$("#SFX").prop("volume", ($("#volumeSlider").val() / 100));
						}
						else {
							$("#BGM").prop("volume", 0);
							$("#SFX").prop("volume", 0);
						}
						$("#SFX").trigger('play');
					});*/
					
					
					
					// Header Buttons
					
					$("#cardListButton").click(function(){
						if(!busy)
						{
							window.scrollTo(0, 0);
							$("#rulesDiv").addClass("hidden");
							$("#summonDiv").addClass("hidden");
							$("#draftDiv").addClass("hidden");
							$("#cardListDiv").removeClass("hidden");
						}
					});
					
					$("#rulesButton").click(function(){
						if(!busy)
						{
							window.scrollTo(0, 0);
							$("#summonDiv").addClass("hidden");
							$("#cardListDiv").addClass("hidden");
							$("#draftDiv").addClass("hidden");
							$("#rulesDiv").removeClass("hidden");
						}
					});
					
					$("#summoningButton").click(function(){
						if(!busy)
						{
							window.scrollTo(0, 0);
							$("#rulesDiv").addClass("hidden");
							$("#cardListDiv").addClass("hidden");
							$("#draftDiv").addClass("hidden");
							$("#summonDiv").removeClass("hidden");
						}
					});
					
					$("#draftButton").click(function(){
						if(!busy)
						{
							window.scrollTo(0, 0);
							$("#rulesDiv").addClass("hidden");
							$("#cardListDiv").addClass("hidden");
							$("#summonDiv").addClass("hidden");
							$("#draftDiv").removeClass("hidden");
						}
					});
					
					// DRAFTING
					
					// Host New Draft
					$("#draftHostButton").click(function(){
						var selfPeer = new Peer();
						var username = $("#draftNameTextbox").val();
						var connectedPlayersBoxHTML = "<strong>Connected Players:</strong><br/><br/>";
						if(username == "")
						{
							username = "Player";
						}
						console.log("Okay");
						
						
						
						selfPeer.on('open', function(id){
							console.log("Peer ID:"+ id);
							$("#draftBeforeConnected").html("");
							$("#connectionInfo").prepend("<h1>Host ID: "+id+"</h1>Send this ID to other players to let them join your draft.<br/><br/>");
							$("#connectedPlayersBox").removeClass("hidden");
							connectedPlayersBoxHTML = connectedPlayersBoxHTML + "<br/><strong>"+username+": </strong>"+id+"</div>";
							$("#connectedPlayersBox").html(connectedPlayersBoxHTML);
						});
						
						selfPeer.on('connection', function(conn) {
							conn.on('data', function(name) {
								connectedPlayersBoxHTML = connectedPlayersBoxHTML + "<br/><strong>"+name+": </strong>"+conn.peer+"</div>";
								conn.send(connectedPlayersBoxHTML);
								$("#connectedPlayersBox").html(connectedPlayersBoxHTML);
							});
						});
					});
					
					// Join Existing Draft
					$("#draftConnectButton").click(function(){
						var selfPeer = new Peer();
						var username = $("#draftNameTextbox").val();
						var connectedPlayersBoxHTML = "";
						if(username == "")
						{
							username = "Player";
						}
						console.log("Okay");
						
						selfPeer.on('open', function(id){
							console.log("Peer ID:"+ id);
							var conn = selfPeer.connect($("#draftHostIDTextbox").val());
							$("#draftBeforeConnected").html("");
							
							conn.on('open', function() {
								conn.send(username);
								
								conn.on('data', function(receiveConnectionBoxHTML){
									$("#connectedPlayersBox").removeClass("hidden");
									connectedPlayersBoxHTML = receiveConnectionBoxHTML;
									$("#connectedPlayersBox").html(connectedPlayersBoxHTML);
								});
							});
						});
					});
					
					
					//Flip Transform Cards
					
					$(document.body).on('click', '.transform',function() {
						$(".transform").toggle();
					});
										
				},
				error: function(data){
					console.log('Error loading XML data');
					$("#console").append('Error loading XML data');
				}
			});
			
			//Animate Card
			function animateCard(cardInput)
			{
				
			}
										
			
			//Create Card Object Function
			function card(cardIdInput,nameInput,rarityInput,tokenInput,layoutInput,sideInput,typeInput){
			
				switch(arguments.length) // Function Overload Handling
				{
					case 0:
						this.cardId = false;
						this.name = "(Argument Error)";
						this.rarity = "(Argument Error)";
						this.isToken = false;
						this.isTransform = false;
						this.isBackside = false;
						this.isEmblem = false;
						this.isBasicLand = false;		
					case 1:
						this.cardId = cardId;
						this.name = "(Argument Error)";
						this.rarity = "(Argument Error)";
						this.isToken = false;
						this.isTransform = false;
						this.isBackside = false;
						this.isEmblem = false;
						this.isBasicLand = false;
						break;
					case 2:
						this.cardId = cardId;
						this.name = name;
						this.rarity = "(Argument Error)";
						this.isToken = false;
						this.isTransform = false;
						this.isBackside = false;
						this.isEmblem = false;
						this.isBasicLand = false;
						break;
					case 3:
						this.cardId = cardId;
						this.name = name;
						this.rarity = rarity;
						this.isToken = false;
						this.isTransform = false;
						this.isBackside = false;
						this.isEmblem = false;
						this.isBasicLand = false;
						break;
					case 4:
						this.cardId = cardId;
						this.name = name;
						this.rarity = rarity;
						this.isToken = isToken;
						this.isTransform = false;
						this.isBackside = false;
						this.isEmblem = false;
						this.isBasicLand = false;
						break;
					case 5:
						this.cardId = cardId;
						this.name = name;
						this.rarity = rarity;
						this.isToken = isToken;
						this.isTransform = isTransform;
						this.isBackside = false;
						this.isEmblem = false;
						this.isBasicLand = false;
						break;
					case 6:
						this.cardId = cardId;
						this.name = name;
						this.rarity = rarity;
						this.isToken = isToken;
						this.isTransform = isTransform;
						this.isBackside = isBackside;
						this.isEmblem = false;
						this.isBasicLand = false;
						break;
					case 7:
						this.cardId = cardId;
						this.name = name;
						this.rarity = rarity;
						this.isToken = isToken;
						this.isTransform = isTransform;
						this.isBackside = isBackside;
						this.isEmblem = isEmblem;
						this.isBasicLand = isBasicLand;
						break;
					default:
						console.log("Error constructing card object. Too many arguments.");
						break;
				}
				
				function cardId(){
					return cardIdInput;
				}
				
				function name(){
					return nameInput;
				}
				function rarity(){
					return rarityInput;
				}
				function isToken(){
					if (tokenInput == "1") {
						return true;
					} else {
						return false;
					}
				}
				function isTransform(){
					if (layoutInput == "transform") {
						return true;
					} else {
						return false;
					}
				}
				function isBackside(){
					if (sideInput == "back") {
						return true;
					} else {
						return false;
					}
				}
				function isEmblem(){
					if (typeInput == "Emblem") {
						return true;
					} else {
						return false;
					}
				}
				function isBasicLand() {
					if (typeInput.includes("Basic Land")) {
						return true;
					} else {
						return false;
					}
				}
			}
			
			//Delay Function
			function delay(ms) {
				return new Promise(resolve => setTimeout(resolve, ms));
			}
			
		});
	</script>
</head>
<body>
	<div id="header"><div id="cardListButton" class="button">Card List</div> <div id="rulesButton" class="button">FAQ</div> <div id="summoningButton" class="button">Summoning</div><div id="draftButton" class="button">Draft</div></div>
	<div id="summonDiv" class="hidden">
		<audio id="BGM" src="Summoning.mp3"></audio><audio id="SFX" src="soundEffect.mp3"></audio>
		<span id="volumeMute" style="font-size: 45px;"><img src="audioIcon.png" style="top: -15px;"/></span><input type="range" min="0" max="100" value="50" class="slider" id="volumeSlider"><br/>
		<div id="summoningPlatform">
			<div id="beforeSummon" class="">
				<div id="begin10SummonButton" class="button">10 Summon</div>
				<br/><br/>
				<strong>Summons 10 cards, 2 of which are guaranteed to be rare or above.</strong>
				<br/><br/>
				<input type="checkbox" id="skipAnimationBox"><strong> Skip Animation</strong>
			</div>
			<div id="duringSummon" class="hidden">
				<div id="summonCardContainer" class="hidden spinning"><img id="summonCard" src = "cardback_default.jpg" class="card fadingIn"></div>
				<video id="summonVid" width="100%" class="">
					<source src="summonBG.webm" type="video/webm">
				</video>
			</div>
			<div id="afterSummon" class="hidden">
				<div id="resetButton" class="buttonSmall">Reset</div>
				<br/>
				<div id="afterSummonList"></div>
			</div>
		</div>
	</div>
	<div id="rulesDiv" class="">
	<h1>FAQ</h1>
	<div style="margin-left:20px; margin-right:20px; text-align: left;"><strong>What is this?</strong><br/>
	This is a Custom Magic the Gathering set based on Fate/Grand Order.  The set is the first in a planned block of three.  The block is called the "Fate" block, and the first set is simply called "Fate/Grand Order".  Naturally, this set may feature spoilers for F/GO and related properties.<br/>
	In general, the set is heavily combo-oriented, with cards specifically designed to work with each other.
	<br/><br/>
	<strong>Can I play this?</strong><br/>
	Yes! Using a program called <a href="https://cockatrice.github.io/">Cockatrice</a>, you can play games using these cards and even combine them with existing MTG cards as well. They're fully compatible.  You just need to make sure the person you're playing with has downloaded this custom set as well, and you're both using the most up-to-date download.
	<br/><br/>
	<strong>My favorite character is missing!</strong><br/>
	This first set includes every single Servant released up to the end of Part 1 of the F/GO storyline.  If your favorite Servant was released in Epic of Remnant or Lostbelt, then it will show up in the later sets when I eventually get to those parts.
	<br/><br/>
	<strong>The colors for this character seem wrong.</strong><br/>
	I did my best to balance making the colors accurate to character personalities and also making them accurate to what that character is capable of, gameplay-wise. Sometimes I had to make a few compromises in either direction.  I'm open to feedback, but a lot of thought was put into the existing colors and there may not be much wiggle room left to tweak colors too much.
	<br/><br/>
	<strong>Why are Noble Phantasms usable by all versions of a Servant?</strong><br/>
	Tying a Noble Phantasm's effect directly to a creature on the same card would have made creatures way too wordy, so I separated them into separate cards.  All versions of a Servant can use them (for example, Artoria Lily can use Excalibur, and all versions of Hassan can use any other Hassan's NP) because I felt this made for a more versatile set that was more fun to play.  Limiting them to only being usable by one card each would have made for a lot of dead draws and unusable cards in your hand.
	<br/><br/>
	<strong>Some of these cards seem pretty powerful...</strong><br/>
	I wanted Noble Phantasms to feel powerful in general, and my main priority is that the set is balanced within itself and that there are viable options in every color.  I'm not overly concerned right now with how balanced it is with the rest of the MTG card pool, as there are already tons of broken cards in MTG.  That being said, the set is still undergoing playtesting and I will be making tweaks to ensure nothing is overtly broken to the point of being unfun.
	<br/><br/>
	<strong>Why bring back old dead mechanics like Cumulative Upkeep or World Enchantments?</strong><br/>
	For World Enchantments, it was because I felt that was the best mechanic to represent Reality Marbles and similar abilities in F/GO. It fit too perfectly. I also gave World Enchantments their own new card frame with full art to make them a bit more exciting.<br/>
	As for Cumulative Upkeep, at first it was because I wanted to emulate the fact that Reality Marbles aren't meant to stick around for long.  But I later realized that there were interesting ways to use the mechanic on other cards as well.  Since it's a bit of a faux-pas to include more than one type of counter on permanents in a set, trying to find ways to use age counters in place of other counters like +1/+1 or -1/-1 counters made for an interesting design challenge.  In order to avoid the nightmare of having to keep track of all sorts of different cumulative upkeep costs, all cumulative upkeep costs in this set are counted in 1s. I felt this was no less manageable than keeping track of how many times your Commander has died, for example.
	<br/><br/>
	<strong>Why add gender? What about cards from before this set?</strong><br/>
	There are too many characters in Fate whose abilities, myths, and legends revolve heavily around gender-based interactions. I felt it was very thematically fitting and it made for a fun mechanic.  From a strict rules perspective, if a card does not have a gender printed on it, then it's genderless. That would include all cards outside of this set.  However, in reality, if Wizards ever added a mechanic like Gender, I imagine they would probably errata older cards to have them, based on their existing lore or card art, so if both players agree beforehand, you could houserule older cards to have genders if you were mixing older cards in. Officially, however, cards only have a gender if they're printed with one.
	<br/><br/>
	<strong>What do Classes do? Don't Classes already exist in MTG?</strong><br/>
	Classes don't really do anything on their own outside of being a new card property for other cards to refer to, but I felt I couldn't just leave them out, since they're so important to FGO.  I'm working on some optional rules that would grant all Servants of each class particular class abilities.  As for the existing "Classes" of MTG, that was always a more colloquial thing to refer to certain creature types.  The word "class" doesn't actually exist in the rules, and I felt the word was too important to FGO to use a different one.
	<br/><br/>
	</div>
	<h1>Download:</h1>
	<a class="buttonSmall" id="downloadLink" href="FGOv0-9-4.rar">v0.9.4</a>
	<br/>
	<strong>Extract in "Users/(Your User)/AppData/Local/Cockatrice/Cockatrice" folder, and overwrite files as necessary.</strong>
	<h1 style="text-align: center;">Rules</h1>
	<br/>
	<table style="width:90%;margin:auto;"><tr>
		<td><img src="FateGrandOrder-files/Fergus Knight of the Red Branch.jpg" class="exampleCard" /></td>
		<td><h2>True Name Bar</h2><strong style="">Some cards in this set have a bar below their name.  This is called the "True Name bar". The color of the bar is indicative of the card's rarity. On this bar, there are three new card properties:
		<h3>Class</h3>The diamond-shaped icon on the top-left indicates a card's class. Normally only creatures and planeswalkers have classes. They don't have any rules meaning on their own, but abilities can refer to them.  The classes in this set are: Archer, Assassin, Berserker, Caster, Lancer, Rider, Saber, Avenger, Ruler, and Shielder. Fergus over here is a saber class creature. If a card doesn't have a class icon, then it doesn't have a class.
		<h3>True Name</h3>A card's "True Name" is listed right below its regular name. This also doesn't have any rules meaning on its own, but many abilities will refer to them. True Names have no bearing on abilities that refer to Names, and vice versa. Fergus' true name is "Fergus mac Róich".
		<h3>Gender</h3>Only creatures and planeswalkers can have genders. A card's gender is determined by the icon in the top right, below the mana cost. Cards can either be male, female, both, or neither. If a card doesn't have a male icon or female icon, then it doesn't have a gender. Fergus is male.</strong></td>
	</tr></table>
	<table style="width:90%;margin:auto;"><tr>
		<td><img src="FateGrandOrder-files/Spiral Sword Caladbolg.jpg" class="exampleCard" /></td>
		<td><h2>New Keyword Abilities</h2><strong style="">
		<h3>Catalyst</h3>Creatures aren't the only cards with True Names. Many cards will share the same True Name. Catalyst is an ability for artifacts. When an artifact with catalyst enters the battlefield, search your library for a Servant type card that shares a True Name with it, and put that card into your hand, then shuffle your library.
		<h3>Soulequip</h3>Soulequip is an ability that only exists on Equipment. If an equipment has Soulequip instead of regular Equip, it can't be equipped to just any creature. You need to attach it to a creature that shares a True Name with it. Other than that, it works exactly like Equip.</strong></td>
	</tr></table>
	<table style="width:90%;margin:auto;"><tr>
		<td><img src="FateGrandOrder-files/Chariot of Boudica.jpg" class="exampleCard" /></td>
		<td><strong style="">
		<h3>Soulcrew</h3>Soulcrew is an ability for Vehicles. You can still treat it like a regular Crew ability and crew a vehicle with any creatures that have power equal to the Soulcrew cost, but you can also crew it with only one creature that shares a True Name with it, regardless of that creature's power.</strong></td>
	</tr></table>
	<table style="width:90%;margin:auto;"><tr>
		<td><img src="FateGrandOrder-files/Jaguar Warrior.jpg" class="exampleCard" /></td>
		<td><strong style="">
		<h3>Berserk</h3>Creatures with Berserk must attack if able, and they must be blocked if able.
		<h3>Landguide</h3>A less powerful version of landwalk. If defending player controls a land of the corresponding type to the type of Landguide your creature has, that creature can't be blocked except by other creatures with the same type of Landguide. As an example, Jaguar Warrior has Forestguide, so if you have a Forest, you can't block Jaguar Warrior except with other creatures that have Forestguide.</strong></td>
	</tr></table>
	<table style="width:90%;margin:auto;"><tr>
		<td><img src="FateGrandOrder-files/Arash Kamangir.jpg" class="exampleCard" /></td>
		<td><strong style="">
		<h2>Returning Old Mechanics</h2>
		<h3>Cumulative Upkeep</h3>If a permanent has Cumulative Upkeep, put an age counter on it at the beginning of your upkeep, then sacrifice that permanent unless you pay the Cumulative Upkeep cost for each age counter on it. In this set, with very few exceptions, the Cumulative Upkeep cost will always be 1 generic mana, making the cost generally 1 mana per age counter.</strong></td>
	</tr></table>
	<table style="width:90%;margin:auto;"><tr>
		<td><img src="FateGrandOrder-files/Aestus Domus Aurea.jpg" class="exampleCard" /></td>
		<td><strong style="">
		<h3>World Enchantments</h3>Only one enchantment with the World supertype may exist on the battlefield at one time, regardless of who controls it.  Whenever a World Enchantment enters the battlefield under either player's control, all other World Enchantments controlled by all players are destroyed. World Enchantments have a unique card frame in this set, and generally have powerful abilities with cumulative upkeep costs to balance them out.</strong></td>
	</tr></table>
	<strong></strong></div>
	<div id="cardListDiv" class="hidden"></div>
	<div id="draftDiv" class="hidden">
		<div style="margin-left:20px; margin-right:20px; text-align: center;">
			<div id="connectionInfo">
				<div id="draftBeforeConnected">
					<br/>
					<h1>Online Draft</h1>
					<strong>Name: </strong><input type="text" id="draftNameTextbox" style="width:250px;" maxlength="16"><br/>
					Click "Host" to host a drafting session, or enter another host's ID and click "Connect" to join their session.<br/><br/>
					<div id="draftHostButton" class="buttonSmall">Host</div><br/>
					<strong>ID:</strong><input type="text" id="draftHostIDTextbox"><div id="draftConnectButton" class="buttonSmall">Connect</div><br/>
				</div>
				<div id="connectedPlayersBox" class="hidden"></div>
			</div>
			<div id="draftSettings" class="hidden">
				<br/>
				<div id="addCPUButton" class="buttonSmall">Add CPU</div>
			</div>
			<div id="draftSummonList"></div><br/>
			<h2>Your Card Pool:</h2><br/>
			<div id="draftCardPool"></div>			
		</div>
	</div>
	<div id="footer"></div>
	<div id="console"></div>
</body>
</html>